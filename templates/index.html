{% extends 'layout.html' %}

{% block title %}Beranda - Sistem Pakar Kerusakan Komputer{% endblock %}

{% block content %}
<!-- Hero Section -->
<header class="hero-section text-white text-center py-5 mb-5">
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <h1 class="display-3 fw-bold mb-4 animate-up">Sistem Pakar Diagnosa Komputer</h1>
        <p class="lead mb-5 animate-up delay-1">
          Gunakan metode <strong>Backward Chaining</strong> untuk mendiagnosis kerusakan komputer dengan validasi
          hipotesis yang akurat
        </p>
        <div class="d-flex justify-content-center gap-3 animate-up delay-2">
          <a href="{{ url_for('diagnosis') }}" class="btn btn-light btn-lg px-5 py-3 fw-bold rounded-pill shadow">
            <i class="bi bi-play-circle me-2"></i>Mulai Diagnosis
          </a>
          <a href="#cara-kerja" class="btn btn-outline-light btn-lg px-5 py-3 fw-bold rounded-pill shadow">
            <i class="bi bi-info-circle me-2"></i>Cara Kerja
          </a>
        </div>
      </div>
    </div>
  </div>
</header>

<!-- Features Section -->
<section class="container mb-5">
  <div class="text-center mb-5">
    <h2 class="fw-bold">Menggunakan Metode Backward Chaining</h2>
    <p class="text-muted">Sistem bekerja dengan memvalidasi hipotesis kerusakan yang Anda pilih</p>
  </div>

  <div class="row text-center g-4">
    <div class="col-md-4">
      <div class="feature-card primary">
        <div class="icon">
          <i class="bi bi-lightbulb"></i>
        </div>
        <h5 class="fw-bold">Pilih Hipotesis</h5>
        <p class="text-muted">Pilih dugaan kerusakan dari 15 jenis kerusakan komputer yang tersedia</p>
      </div>
    </div>
    <div class="col-md-4">
      <div class="feature-card success">
        <div class="icon">
          <i class="bi bi-question-circle"></i>
        </div>
        <h5 class="fw-bold">Jawab Pertanyaan</h5>
        <p class="text-muted">Konfirmasi gejala-gejala yang terkait dengan hipotesis Anda</p>
      </div>
    </div>
    <div class="col-md-4">
      <div class="feature-card info">
        <div class="icon">
          <i class="bi bi-graph-up"></i>
        </div>
        <h5 class="fw-bold">Dapatkan Hasil</h5>
        <p class="text-muted">Lihat tingkat keyakinan dan rekomendasi perbaikan yang tepat</p>
      </div>
    </div>
  </div>
</section>

<!-- How It Works Section -->
<section id="cara-kerja" class="bg-light py-5">
  <div class="container">
    <div class="text-center mb-5">
      <h2 class="fw-bold">Cara Kerja Backward Chaining</h2>
      <p class="text-muted">3 langkah mudah untuk diagnosis kerusakan komputer</p>
    </div>

    <div class="row g-4">
      <div class="col-md-4 text-center">
        <div class="mb-3">
          <div class="icon-circle bg-primary text-white mx-auto">
            <span class="fs-3 fw-bold">1</span>
          </div>
        </div>
        <h5>Pilih Hipotesis</h5>
        <p class="text-muted">Pilih jenis kerusakan yang Anda curiga terjadi pada komputer</p>
      </div>
      <div class="col-md-4 text-center">
        <div class="mb-3">
          <div class="icon-circle bg-success text-white mx-auto">
            <span class="fs-3 fw-bold">2</span>
          </div>
        </div>
        <h5>Konfirmasi Gejala</h5>
        <p class="text-muted">Jawab pertanyaan tentang gejala-gejala yang muncul</p>
      </div>
      <div class="col-md-4 text-center">
        <div class="mb-3">
          <div class="icon-circle bg-info text-white mx-auto">
            <span class="fs-3 fw-bold">3</span>
          </div>
        </div>
        <h5>Lihat Hasil</h5>
        <p class="text-muted">Dapatkan tingkat keyakinan dan solusi perbaikan</p>
      </div>
    </div>
  </div>
</section>

<!-- Statistics Section -->
<section class="container py-5">
  <div class="text-center mb-5">
    <h2 class="fw-bold">Statistik Sistem</h2>
    <p class="text-muted">Kemampuan diagnosis sistem kami</p>
  </div>

  <div class="row g-4">
    <div class="col-md-3 col-6 text-center">
      <div class="counter">
        <h3 class="fw-bold text-primary">{{ kerusakan|length }}</h3>
        <p class="text-muted">Jenis Kerusakan</p>
      </div>
    </div>
    <div class="col-md-3 col-6 text-center">
      <div class="counter">
        <h3 class="fw-bold text-success">{{ gejala|length }}</h3>
        <p class="text-muted">Gejala Terdeteksi</p>
      </div>
    </div>
    <div class="col-md-3 col-6 text-center">
      <div class="counter">
        <h3 class="fw-bold text-info">95%</h3>
        <p class="text-muted">Tingkat Akurasi</p>
      </div>
    </div>
    <div class="col-md-3 col-6 text-center">
      <div class="counter">
        <h3 class="fw-bold text-warning">1</h3>
        <p class="text-muted">Metode Diagnosis</p>
      </div>
    </div>
  </div>
</section>

<!-- CTA Section -->
<section class="container py-5">
  <div class="text-center">
    <div class="card border-0 shadow-lg">
      <div class="card-body p-5">
        <h2 class="fw-bold mb-3">Siap Mendiagnosis Komputer Anda?</h2>
        <p class="text-muted mb-4">Mulai diagnosis sekarang dan temukan solusi untuk masalah komputer Anda</p>
        <a href="{{ url_for('diagnosis') }}" class="btn btn-primary btn-lg px-5 py-3 rounded-pill">
          <i class="bi bi-arrow-right-circle me-2"></i>Mulai Diagnosis Sekarang
        </a>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script>
  // Counter animation
  function animateCounters() {
    const counters = document.querySelectorAll('.counter h3');

    counters.forEach(counter => {
      const target = +counter.innerText.replace(/[^0-9.]/g, '');
      const isPercentage = counter.innerText.includes('%');
      const increment = target / 100;
      let current = 0;

      const updateCounter = () => {
        current += increment;
        if (current < target) {
          counter.innerText = Math.ceil(current) + (isPercentage ? '%' : '');
          requestAnimationFrame(updateCounter);
        } else {
          counter.innerText = target + (isPercentage ? '%' : '');
        }
      };

      updateCounter();
    });
  }

  // Trigger counter animation when in view
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        animateCounters();
        observer.disconnect();
      }
    });
  });

  const counterSection = document.querySelector('.counter');
  if (counterSection) {
    observer.observe(counterSection);
  }
</script>
{% endblock %}